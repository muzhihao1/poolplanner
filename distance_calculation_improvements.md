# 距离计算优化说明

## 优化内容

### 1. 台球桌之间的距离计算
- **原问题**：显示斜线距离，不利于判断实际可用空间
- **解决方案**：
  - 当两个台球桌在斜对角位置时，选择较小的距离（水平或垂直）显示
  - 只显示水平或垂直方向的距离线，避免斜线
  - 这样更符合实际使用需求，便于判断打球空间

### 2. 障碍物距离计算
- 同样优化为只显示水平或垂直距离
- 选择较小的距离值显示，更准确反映实际可用空间

### 3. 距离线绘制逻辑
- 水平距离：连线为水平线
- 垂直距离：连线为垂直线
- 斜对角情况：根据选择的距离方向绘制对应的水平或垂直线

## 技术实现

```javascript
// 优先显示垂直或水平距离
if (isHorizontal && !isVertical) {
    // 纯水平方向
    distance = dx;
} else if (isVertical && !isHorizontal) {
    // 纯垂直方向
    distance = dy;
} else if (isHorizontal && isVertical) {
    // 斜对角方向 - 选择较小的距离显示
    if (dx < dy) {
        // 显示水平距离
        distance = dx;
    } else {
        // 显示垂直距离
        distance = dy;
    }
}
```

## 使用效果

1. **更准确的空间判断**：只显示垂直或水平距离，便于判断实际可用的打球空间
2. **更清晰的视觉效果**：避免斜线标注，界面更整洁
3. **更实用的信息**：显示的距离直接对应可用空间的宽度或高度

## 测试页面

可以打开 `test_distance_improvements.html` 查看改进效果的演示。